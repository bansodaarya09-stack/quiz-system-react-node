import React,{useEffect,useState} from 'react';
import { API_BASE } from '../api';
import { Table, TableBody, TableCell, TableHead, TableRow, Typography } from '@mui/material';
export default function Admin(){ const [results,setResults]=useState([]); useEffect(()=>{ fetchResults(); },[]); async function fetchResults(){ try{ const res=await fetch(API_BASE + '/api/results',{headers:{'Authorization':'Bearer '+localStorage.getItem('token')}}); const data=await res.json(); setResults(Array.isArray(data)?data:data?Object.keys(data).map(k=>({username:k,...data[k]})):[]);}catch(e){console.error(e); alert('Cannot load results'); } } return (<><Typography variant="h5" sx={{mb:2}}>Student Results</Typography><Table><TableHead><TableRow><TableCell>Username</TableCell><TableCell>Score</TableCell><TableCell>Total</TableCell></TableRow></TableHead><TableBody>{results.map((r,i)=>(<TableRow key={i}><TableCell>{r.username}</TableCell><TableCell>{r.score}</TableCell><TableCell>{r.total}</TableCell></TableRow>))}</TableBody></Table></>); }
